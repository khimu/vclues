
<!DOCTYPE html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <link href='styles/main.css' rel='stylesheet' type='text/css'>
        <link href='styles/bootstrap.min.css' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
        <script src="js/jquery-1.12.4.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/typed.js" type="text/javascript"></script>
        <script src="js/jquery-ui.js" type="text/javascript"></script>
        <script src="js/jQueryRotate.js" type="text/javascript"></script>
    </head>
    <body class='lang-en page_image'>
        <div id='loader'>
            <img src="images/loader.gif" class="page_image"/>
        </div>
        <div id="bg_left_character"><img src=""/></div>
        <div id="bg_right_character"><img src=""/></div>
        <div style="display:none;" id="describe_site_short_typed_strings"><span>Simply rotate given image by a given angle.</span></div>
        <ul class="login_register_button_outer">
            <li class="working page_image">
                <div data-toggle="modal" data-target="#login_outer" class="title">Login</div>
                <div class="describe_site page_image">
                    <span class="typed"></span>
                </div>
            </li>
            <li class="working page_image">
                <div data-toggle="modal" data-target="#register_outer" class="title">Regist<span style=''>er</span></div>
                <div class="describe_site page_image">
                    <span class="typed"></span>
                </div>
            </li>
        </ul>
        <div class="clear"></div>
        <div id="describe_about_site_startup" class="">
            <div style="display:none;" id="describe_site_phrase_typed_strings"><span><p>Simply rotateSimply rotate</p>
</span></div>
           <ul>
               <li>
                   <span class="typed_phrase"></span>
               </li>
           </ul> 
        </div>
        <div id="describe_about_site" class="">
           <ul>
               <li>
                   <span><p>Simply rotateSimply rotate</p>
</span>
               </li>
           </ul> 
        </div>
        <div id="login_outer" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="logo"></div>
                    <div class="login-block">
                        <h1>Login</h1>
                        <div class="error"></div>
                        <form method="post" id="user_login_form">
                            <input type="email" value="" placeholder="Username" id="username" name="username" required="required"/>
                            <input type="password" value="" placeholder="Password" id="password" name='password' required="required"/>
                            <input type='hidden' name="existing_user" value=""/>
                            <button type="submit">&nbsp;</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="register_outer" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="logo"></div>
                    <div class="login-block">
                        <h1>New User</h1>
                        <div class="error"></div>
                        <form method="post" id="new_user_form">
                            <input type="text" value="" placeholder="Firstname" id="firstname" name="firstname" required="required"/>
                            <input type="text" value="" placeholder="Lastname" id="lastname" name="lastname" required="required"/>
                            <input type="email" value="" placeholder="Email" id="useremail" name="useremail" required="required"/>
                            <div class="form-control">
                                Gender&nbsp;&nbsp;&nbsp;&nbsp;
                                Boy <input type="radio" value="1" id="gender" required="required" name="gender"/>&nbsp;&nbsp;
                                Girl <input type="radio" value="2" id="gender" required="required" name="gender"/>
                            </div>
                            <input type="password" value="" placeholder="Password" id="password" name="password"/>
                            <input type='hidden' name="create_user" value=""/>
                            <button type="submit">&nbsp;</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
  </html>
  <script>
      //document.addEventListener('DOMContentLoaded', function()
      function content_type_short()
      {
        Typed.new(".typed", 
        {
            stringsElement: document.getElementById('describe_site_short_typed_strings'),
            typeSpeed: 30,
            backDelay: 500,
            loop: false,
            contentType: 'html', // or text
            // defaults to null for infinite loop
            loopCount: null
            //callback: function(){ foo(); },
            //resetCallback: function() { newTyped(); }
        });

        /*var resetElement = document.querySelector('.reset');
        //if(resetElement) 
        {
            resetElement.addEventListener('click', function() {
                document.getElementById('typed')._typed.reset();
            });
        }*/
      }
      function story_phrase()
      {
        Typed.new(".typed_phrase", 
        {
            stringsElement: document.getElementById('describe_site_phrase_typed_strings'),
            typeSpeed: 1,
            backDelay: 500,
            loop: false,
            contentType: 'html', // or text
            // defaults to null for infinite loop
            loopCount: null,
            callback: function(){ foo(); }
            //resetCallback: function() { newTyped(); }
        });

        /*var resetElement = document.querySelector('.reset');
        //if(resetElement) 
        {
            resetElement.addEventListener('click', function() {
                document.getElementById('typed')._typed.reset();
            });
        }*/
    }
    function foo()
    {
        jQuery("#describe_about_site_startup").css("top",'150%');
        jQuery("#describe_about_site_startup").css("left","-100%");
        
        jQuery(".login_register_button_outer").fadeIn(1000);
        jQuery("#describe_about_site").fadeIn(1000);
    }
    jQuery(document).ready(function()
    {
        //Code for align div at center of the screen
    	jQuery.fn.center = function(parent) 
    	{
    		if (parent) 
    		{
    			parent = this.parent();
    		} 
    		else 
    		{
    			parent = window;
    		}
    		this.css({
    			"position": "fixed",
    			"display": "block",
    			"top": (((jQuery(parent).height() - this.outerHeight()) / 2) + jQuery(parent).scrollTop() + "px"),
    			"left": (((jQuery(parent).width() - this.outerWidth()) / 2) + jQuery(parent).scrollLeft() + "px")
    		});
    		left=((jQuery(parent).width() - this.outerWidth()) / 2) + jQuery(parent).scrollLeft() + "px";
    		//return this;
    		return left;
    	}
    	
        jQuery('<img/>').attr('src', 'images/home_bg.png').on('load', function() 
        {
            //load bg images of login and register
            jQuery('<img/>').attr('src', 'images/bubbles_login.png').on('load', function() 
            {
                jQuery(this).remove();
                imageUrl='images/bubbles_login.png';
                jQuery(".login_register_button_outer li:nth-child(1) .describe_site").css('background-image', 'url(' + imageUrl + ')');
            });
            jQuery('<img/>').attr('src', 'images/bubbles_register.png').on('load', function() 
            {
                jQuery(this).remove();
                imageUrl='images/bubbles_register.png';
                jQuery(".login_register_button_outer li:nth-child(2) .describe_site").css('background-image', 'url(' + imageUrl + ')');
            });
            jQuery('<img/>').attr('src', 'images/posty_note_bg.png').on('load', function() 
            {
                jQuery(this).remove();
                imageUrl='images/posty_note_bg.png';
                jQuery("#register_outer .model-content").css('background-image', 'url(' + imageUrl + ')');
                jQuery("#login_outer .model-content").css('background-image', 'url(' + imageUrl + ')');
                
                jQuery('<img/>').attr('src', 'images/knife_submit.gif').on('load', function() 
                {
                    jQuery(this).remove();
                    imageUrl='images/knife_submit.gif';
                    jQuery("#register_outer button").css('background-image', 'url(' + imageUrl + ')');
                    
                    jQuery('<img/>').attr('src', 'images/fallback/boxtrolls.png').on('load', function() 
                    {
                        jQuery(this).remove();
                        imageUrl='images/fallback/boxtrolls.png';
                        jQuery("#logo_outer .logo").css('background-image', 'url(' + imageUrl + ')');
                        jQuery("#register_outer .logo").css('background-image', 'url(' + imageUrl + ')');
                        
                        jQuery('<img/>').attr('src', 'images/phrase_bg.png').on('load', function() 
                        {
                            jQuery(this).remove();
                            imageUrl='images/phrase_bg.png';
                            jQuery("#describe_about_site ul  li").css('background-image', 'url(' + imageUrl + ')');
                            jQuery("#describe_about_site_startup ul  li").css('background-image', 'url(' + imageUrl + ')');
                            
                            jQuery('<img/>').attr('src', 'images/bg_left.gif').on('load', function() 
                            {
                                jQuery('<img/>').attr('src', 'images/bg_right.gif').on('load', function() 
                                {
                                    jQuery(this).remove();
                                    jQuery("#bg_left_character img").attr('src', 'images/bg_left.gif');
                                    jQuery("#bg_right_character img").attr('src', 'images/bg_right.gif');
                                    jQuery("#bg_left_character").addClass('bg_left_character_after_load');
                                    jQuery("#bg_right_character").addClass('bg_right_character_after_load');
                                    
                                    
                                    jQuery("#loader").hide();
                                    jQuery('body').addClass('body_class');
                                    setTimeout(
                                    function() 
                                    {
                                        cal_left=jQuery("#describe_about_site_startup").center(true);
                                        jQuery("#describe_about_site_startup").css("top",'30%');
                                        jQuery("#describe_about_site_startup").css("left",cal_left); 
                                        story_phrase(); 
                                      }, 2000);
                                });
                            });
                        });
                    });
                });
            });
        });
        
        jQuery(".login_register_button_outer li:nth-child(1)").hover(function () 
        {
            jQuery(this).find(".describe_site").fadeIn(400);
            //jQuery(this).find(".describe_site").css("left",'275px');
            jQuery(this).find(".describe_site").addClass('left_bubble_hover');
            content_type_short();
            jQuery(this).rotate({ animateTo:30});
            jQuery(this).find(".describe_site").rotate({ animateTo:-30});
        },function () 
        {
            jQuery(this).find(".describe_site").hide();
            //jQuery(this).find(".describe_site").css("top",'-50%');
            jQuery(this).find(".describe_site").css("left",'30%');
            jQuery(this).rotate({ animateTo:0});
            jQuery(this).find(".describe_site").rotate({ animateTo:-30});
        });
        
        jQuery(".login_register_button_outer li:nth-child(2)").hover(function () 
        {
            jQuery(this).find(".describe_site").fadeIn(400);
            //jQuery(this).find(".describe_site").css("left",'-275px');
            jQuery(this).find(".describe_site").addClass('right_bubble_hover');
            content_type_short();
            jQuery(this).rotate({ animateTo:-30});
            jQuery(this).find(".describe_site").rotate({ animateTo:30});
        },function () 
        {
            jQuery(this).find(".describe_site").hide();
            //jQuery(this).parent('li').find(".describe_site").css("top",'-50%');
            jQuery(this).find(".describe_site").css("left",'-20%');
            jQuery(this).rotate({ animateTo:0});
            jQuery(this).find(".describe_site").rotate({ animateTo:30});
        });
        
          jQuery("#new_user_form").on("submit",function(e)
          {
            jQuery(".modal-backdrop").css("z-index","9999");
            var url = "ajax.php"; // the script where you handle the form input.
            jQuery.ajax({
                   type: "POST",
                   url: url,
                   data: jQuery(this).serialize(), // serializes the form's elements.
                   success: function(data)
                   {
                       //jQuery(".modal-backdrop").css("z-index","1040");
                       if(data=='Email Alredy Exist!')
                       {
                           jQuery(".modal-backdrop").css("z-index","1040");
                           var options = {};
                           jQuery("#register_outer .login-block" ).effect( 'shake', options, 500 );
                           jQuery("#register_outer .error").html("Email Alredy Exist!");
                           setTimeout(function() 
                           {
                                jQuery("#register_outer .error").html("");
                            }, 8000 );
                       }
                       else
                       {
                            window.location="http://vegaclues.wisesystdemo.in/";
                       }
                   }
                 });
             e.preventDefault();
          });
          jQuery("#user_login_form").on("submit",function(e)
          {
            jQuery(".modal-backdrop").css("z-index","9999");
            var url = "ajax.php"; // the script where you handle the form input.
            jQuery.ajax({
                   type: "POST",
                   url: url,
                   data: jQuery(this).serialize(), // serializes the form's elements.
                   success: function(data)
                   {
                       return_data=data.split(",");
                       //jQuery(".modal-backdrop").css("z-index","1040");
                       if(return_data[0]==0)
                       {
                           jQuery(".modal-backdrop").css("z-index","1040");
                           var options = {};
                           jQuery("#login_outer .login-block" ).effect( 'shake', options, 500 );
                           jQuery("#login_outer .error").html("Invalid Username or Password!");
                           setTimeout(function() 
                           {
                                jQuery("#login_outer .error").html("");
                            }, 8000 );
                       }
                       else
                       {
                            window.location="http://vegaclues.wisesystdemo.in/";
                       }
                   }
                 });
             e.preventDefault();
          });
      });
  </script>

