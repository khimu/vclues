<!-- menu -->

<!-- Default URL is / -->

<!doctype html>
<html lang="en">
    <head>
    	<title>Vega Clues LLC</title>
    	
    	<meta charset="utf-8" />
    	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    	<meta name="viewport" content="width=device-width, initial-scale=1" />    	
    	
    	<link rel='shortcut icon' type='image/x-icon' href='/assets/images/favicon.ico' />
		
		<!-- Opera Speed Dial Favicon -->
		  <link rel="icon" type="image/png" href="/assets/images/android-chrome-512x512.png" />
		
		<!-- For iPhone 4 Retina display: -->
		  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114-precomposed.png"/>
		
		<!-- For iPad: -->
		  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72-precomposed.png"/>
		
		<!-- For iPhone: -->
		  <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon-57x57-precomposed.png"/>    	
        	    	
        <link rel="stylesheet" type="text/css" href="/assets/css/style.css" />	
        <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/3.3.7/css/bootstrap.min.css" />
        
		<script type="text/javascript" src="/webjars/jquery/3.1.1-1/jquery.min.js"></script>
        <script type="text/javascript" src="/webjars/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <script src="/assets/js/typed.js" type="text/javascript"></script>
        
        <script src="/assets/js/jquery-ui.js" type="text/javascript"></script>
        
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-101505063-1', 'auto');
		  ga('send', 'pageview');
		
		</script>
		
<style>

</style>

<script th:inline="javascript">
/*<![CDATA[*/

    var gameId = [[${game == null ? '' : game.id}]];
    
    if(!isEmpty(gameId)) {
    	storyId = [[${game == null ? '' : game.storyId}]];
    	console.log('storyId ' + storyId);
    	
        var players = [[${game == null || game.players == null ? 0 : #lists.size(game.players)}]];
        
        console.log('players ' + players);
        
        var gameCast = [[${game == null || game.players == null ? 0 : #lists.size(game.gameCast)}]];
        
        console.log('gameCast ' + gameCast);    	
    }

    console.log('gameId ' + gameId);
    
	csrfParam = [[${_csrf == null ? '' : _csrf.parameterName}]];
	csrfToken = [[${_csrf == null ? '' : _csrf.token}]];   

    /*]]>*/


function isEmpty(str) {
    return (!str || 0 === str.length);
}


$( document ).ready(function() {
    console.log( "ready!" );

    
    var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

    console.log(w);
    console.log(h);
    
    //$('.container').css({'background-size': w + 'px ' + h + 'px'});   
    $('body').css({ 'height': h });   
    //$('.game').css({ 'height': h });   
    //$('.menu').css({ 'height': h });
    $('.container').css({ 'height': h }); 
    
    $('body').css({ 'width': w });   
    $('.container').css({ 'width': w }); 
    //$('.game').css({ 'width': w });   
    //$('.menu').css({ 'width': w });  
    
    
	$(function() {
		/*
		if(!isEmpty(gameId)) {
			console.log('making Story inactive and game active');
			$(".menu li:first()").removeClass("inactive");
			$(".menu li:nth(1)").addClass("inactive");
			
		}
		else {
			console.log('making game inactive and story active');
			$(".menu li:first()").addClass("inactive");
			$(".menu li:nth(1)").removeClass("inactice");
		}
		*/
		
		if(!isEmpty(gameId)) {
	  		$(".menu li:first()").on("click",function() {
    			console.log( "clicked!" );
    			
    			$('.menu-button').hide();
    			$('.back-button').show();
   				$('.menu').hide();
				$('.game').show();
	  		});
		}
		else {
	  		$(".menu li:nth(1)").on("click",function() {
	    			console.log( "second!" );
	    			
	    			window.location = "/videos";
	    			
	    			/*
	    			$.ajax({url: "/logout", success: function(result){
	    		        $("#div1").html(result);
	    		    }});
	    			*/
	  		});
		}

  		$(".menu li:nth(2)").on("click",function() {
    			console.log( "3rd!" );
    			
    			window.location = "/login?logout";
  		});

		$(".game li:first()").on("click",function() {
			/*<![CDATA[*/if(gameId != null) {/*]]>*/
				window.location = "/game/cast/" + gameId;
			}
		});

		$(".game li:nth(1)").on("click",function() {
			// show scripts only after all characters are chosen
			/*<![CDATA[*/if(players == gameCast) {/*]]>*/
				console.log('show scripts');
				window.location = "/game/script/" + gameId;
			}
			
			// to be deleted
			window.location = "/game/script/" + gameId;
		});
		
		$(".game li:nth(2)").on("click",function() {
			// show clues only if all players are chosen
			/*<![CDATA[*/if(players == gameCast) {/*]]>*/
				console.log('show clues');
				window.location = "/game/clue/" + gameId;
			}
			
			// to be deleted
			window.location = "/game/clue/" + gameId;
		});

		$(".game li:nth(3)").on("click",function() {
			console.log('guess murderer');
			window.location = "/game/guess/" + gameId;
		});
		
		
		
		$(".game li:nth(4)").on("click",function() {
			// show clues only if all players are chosen
			/*<![CDATA[*/if(gameId != null) {/*]]>*/
				console.log('end game');
				logoutClick.facebookLogout();

				window.location = "/game/end/" + gameId;
			}
			
			// to be deleted
			window.location = "/game/end/" + gameId;
		});		
		
	});

	$('.menu-button').on('click', function() {
		console.log("menu-button");
		
		if(gameId != null) {
			$('.menu').show();
		}
	});

	$('.back-button').on('click', function() {
		console.log("back-button");
		$('.menu-button').show();
		$('.menu').show();
		$('.game').hide();
		$('.back-button').hide();
	});
	
    $('.description').on('click', function() {
    	$('.description').hide();
    });	

});

function logout() {
	var jqxhr = $.post( "/logout", {_csrf: csrfToken}, function() {
		  console.log( "success" );
		}).done(function() {
		    console.log( "second success" );
		}).fail(function() {
			console.log( "error" );
		}).always(function() {
			console.log( "finished" );
		});
		 
		window.location = '/';
		
		// Perform other work here ...
		 
		// Set another completion function for the request above
		jqxhr.always(function() {
			console.log( "second finished" );
	});
}






function content_type_short()
{
	  console.log('short typed string content_type_short');
	  
  Typed.new(".typed", 
  {
      stringsElement: document.getElementById('describe_site_short_typed_strings'),
      typeSpeed: 30,
      backDelay: 2000,
      loop: false,
      contentType: 'html', // or text
      // defaults to null for infinite loop
      loopCount: null
  });
}
function story_phrase()
{
	  console.log('short typed string story_phrase');
	  
  Typed.new(".typed_phrase", 
  {
      stringsElement: document.getElementById('describe_site_phrase_typed_strings'),
      typeSpeed: 70,
      backDelay: 2000,
      loop: false,
      contentType: 'html', // or text
      // defaults to null for infinite loop
      loopCount: null,
      callback: function(){ foo(); }
      //resetCallback: function() { newTyped(); }
  });
}

function foo()
{
	//console.log('foo is called');
  jQuery("#describe_about_site_startup").css("top",'550%');
  jQuery("#describe_about_site_startup").css("left","-100%");
}

jQuery(document).ready(function()
{ 
	jQuery(".clue").hover(function () 
  {
  	console.log('login child 1');
  	
      jQuery(this).find(".describe_site").fadeIn(2000);
      jQuery(this).find(".describe_site").addClass('right_bubble_hover');
      content_type_short();
      
      jQuery(this).rotate({ animateTo:30});
      
      jQuery(this).find(".describe_site").rotate({ animateTo:-30});
  },function () 
  {
      jQuery(this).find(".describe_site").hide();
      jQuery(this).find(".describe_site").css("right",'30%');
  });       		
	
});

</script>

<script src="/assets/js/social.js" type="text/javascript"></script>

</head>

<body>
  	<div class="global_container_">
   		<div class="content">
    		<div class="clue_layer">
    			
				<a href="#" class="btn_close"><img src="/assets/images/space.png" alt="" width="55" height="55"/></a>
    			<h1 class="clue describe_site">Menu</h1>
    			<div class="row-4 group">
					<ul class="button-6 group">
					 <li th:switch="${gameCount != null and gameCount > 0}">
								<p class="game" th:case="true"><a href="/game/all">Game</a></p>
								<p class="game inactive" th:case="false">Game</p>
					 </li>         
			         <li><p class="story-2"><a href="/videos">Story</a></p></li>
			         <li><p class="help"><a href="#">Help</a></p></li>
			         <li><p class="logout"><a href="javascript: logout();">Logout</a></p></li>
			        </ul>
				</div>
			</div>
			<span class="typed" style="font-size:8px;color:#DCDCDC;position:absolute:top:100px;left:30%;"></span>
		</div>
		
	</div>

</body>

</html>
